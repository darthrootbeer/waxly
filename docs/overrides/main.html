{% if page and page.file and page.file.src_path == 'index.md' %}
<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Waxly</title>
    <style>
      /* Import Cooper Black font */
      @import url('https://fonts.cdnfonts.com/css/cooper-black');

      /* COMPLETE OVERRIDE - Hide everything */
      * {
        box-sizing: border-box;
      }

      html, body {
        margin: 0 !important;
        padding: 0 !important;
        overflow: hidden !important;
        height: 100vh !important;
        width: 100vw !important;
        font-family: 'Cooper Black', 'Impact', 'Arial Black', sans-serif;
        animation: rainbow-cycle 120s linear infinite !important; /* Apply rainbow animation to body */
      }

      @keyframes rainbow-cycle {
        0% { background: linear-gradient(135deg, #FF6B6B 0%, #FFE66D 50%, #4ECDC4 100%); }
        14% { background: linear-gradient(135deg, #FFE66D 0%, #4ECDC4 50%, #45B7D1 100%); }
        28% { background: linear-gradient(135deg, #4ECDC4 0%, #45B7D1 50%, #A06CD5 100%); }
        42% { background: linear-gradient(135deg, #45B7D1 0%, #A06CD5 50%, #FF6B9D 100%); }
        57% { background: linear-gradient(135deg, #A06CD5 0%, #FF6B9D 50%, #FFD93D 100%); }
        71% { background: linear-gradient(135deg, #FF6B9D 0%, #FFD93D 50%, #6BCF7F 100%); }
        85% { background: linear-gradient(135deg, #FFD93D 0%, #6BCF7F 50%, #FF6B6B 100%); }
        100% { background: linear-gradient(135deg, #6BCF7F 0%, #FF6B6B 50%, #FFE66D 100%); }
      }

      /* Hide ALL MkDocs elements with maximum specificity */
      html body .md-header,
      html body .md-sidebar,
      html body .md-nav,
      html body .md-footer,
      html body .md-tabs,
      html body .md-tabs__list,
      html body .md-tabs__item,
      html body .md-tabs__link,
      html body .md-main__inner,
      html body .md-content,
      html body .md-content__inner,
      html body nav,
      html body header,
      html body footer,
      html body .md-container,
      html body .md-top,
      html body [data-md-component="header"],
      html body [data-md-component="navigation"],
      html body [data-md-component="outdated"],
      html body [data-md-component="skip"],
      html body [data-md-component="announce"],
      html body .md-header__inner,
      html body .md-header__button,
      html body .md-header__title,
      html body .md-tabs__list,
      html body .md-tabs__item,
      html body .md-tabs__link {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        height: 0 !important;
        width: 0 !important;
        overflow: hidden !important;
        position: absolute !important;
        left: -9999px !important;
        top: -9999px !important;
      }

      /* Main container - GUARANTEE everything fits */
      .spinney-container {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        height: 100vh !important;
        width: 100vw !important;
        max-height: 100vh !important;
        max-width: 100vw !important;
        display: flex !important;
        flex-direction: column !important;
        justify-content: center !important;
        align-items: center !important;
        padding: 2vh 3vw !important;
        margin: 0 !important;
        text-align: center !important;
        background: transparent !important; /* Ensure background is transparent to show rainbow */
        z-index: 10 !important;
        pointer-events: none !important; /* Allow clicks to pass through to background */
        box-sizing: border-box !important;
        overflow: hidden !important; /* Hide overflow if content is too large */
      }

      /* Image wrapper - constrain to safe area */
      .spinney-image-wrapper {
        width: 100% !important;
        max-width: 90vw !important;
        display: flex !important;
        justify-content: center !important;
        align-items: center !important;
        flex-shrink: 1 !important;
        margin-bottom: 2vh !important;
        max-height: 40vh !important; /* Max height for image wrapper */
        pointer-events: auto !important; /* Re-enable pointer events for children */
      }

      /* Image - ensure it NEVER exceeds container */
      .spinney-image {
        max-width: min(30vw, 350px) !important;
        max-height: 40vh !important; /* Max height for image */
        width: auto !important;
        height: auto !important;
        object-fit: contain !important; /* Ensure image scales down to fit */
        animation: float 6s ease-in-out infinite !important;
        filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.6)) !important;
        pointer-events: auto !important; /* Re-enable pointer events for image */
      }

      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
      }

      /* Text - ensure it NEVER exceeds container */
      .spinney-message {
        font-family: 'Cooper Black', 'Impact', 'Arial Black', sans-serif !important;
        font-size: min(4.5vw, 4.5vh, 60px) !important; /* Triple min for robust scaling */
        font-weight: 900 !important;
        line-height: 1.15 !important;
        max-width: 90vw !important;
        max-height: 35vh !important; /* Max height for text */
        padding: 0 !important;
        letter-spacing: 0.02em !important;
        color: #ffffff !important;
        text-shadow:
          0 4px 12px rgba(0, 0, 0, 0.4),
          0 2px 6px rgba(0, 0, 0, 0.3),
          0 1px 3px rgba(0, 0, 0, 0.2) !important;
        flex-shrink: 0 !important;
        pointer-events: auto !important; /* Re-enable pointer events for text */
        overflow: hidden !important; /* Hide overflow if text is too large */
      }

      /* Responsive - GUARANTEE content fits at all sizes */
      @media (max-width: 1200px) {
        .spinney-image {
          max-width: min(32vw, 280px) !important;
        }
        .spinney-message {
          font-size: min(4vw, 4vh, 55px) !important;
        }
      }

      @media (max-width: 768px) {
        .spinney-container {
          padding: 2vh 2vw !important;
        }
        .spinney-image-wrapper {
          max-height: 35vh !important;
        }
        .spinney-image {
          max-width: min(45vw, 220px) !important;
          max-height: 35vh !important;
        }
        .spinney-message {
          font-size: min(5vw, 3.5vh, 48px) !important;
          max-width: 92vw !important;
        }
      }

      @media (max-width: 480px) {
        .spinney-container {
          padding: 1.5vh 2vw !important;
        }
        .spinney-image-wrapper {
          max-height: 30vh !important;
        }
        .spinney-image {
          max-width: min(55vw, 180px) !important;
          max-height: 30vh !important;
        }
        .spinney-message {
          font-size: min(6vw, 3vh, 40px) !important;
          max-width: 94vw !important;
        }
      }

      /* Extra wide screens - be ultra conservative */
      @media (min-aspect-ratio: 16/9) {
        .spinney-container {
          padding: 2vh 4vw !important;
        }
        .spinney-image-wrapper {
          max-height: 35vh !important;
        }
        .spinney-image {
          max-width: min(25vw, 300px) !important;
          max-height: 35vh !important;
        }
        .spinney-message {
          font-size: min(3.5vw, 3.5vh, 50px) !important;
        }
      }

      /* Very tall screens (portrait) */
      @media (max-aspect-ratio: 3/4) {
        .spinney-image-wrapper {
          max-height: 30vh !important;
        }
        .spinney-image {
          max-height: 30vh !important;
        }
        .spinney-message {
          font-size: min(6vw, 3vh, 45px) !important;
          max-height: 30vh !important;
        }
      }
    </style>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Force hide ALL navigation and MkDocs elements
      const hideAll = () => {
        const elementsToHide = [
          'nav', '.md-tabs', '.md-tabs__list', '.md-tabs__item', '.md-tabs__link',
          '.md-header', '.md-sidebar', '.md-footer', '.md-nav', '.md-container',
          '.md-main__inner', '.md-content', '.md-content__inner', 'header', 'footer',
          '.md-top', 'article h1', '.md-header__inner', '.md-header__button',
          '[data-md-component="header"]', '[data-md-component="navigation"]'
        ];

        elementsToHide.forEach(selector => {
          const elements = document.querySelectorAll(selector);
          elements.forEach(el => {
            if (el && !el.classList.contains('spinney-container') &&
                !el.classList.contains('video-credit') && el.id !== 'bg-video') {
              el.style.display = 'none';
              el.style.visibility = 'hidden';
              el.style.opacity = '0';
              el.style.height = '0';
              el.style.width = '0';
              el.style.overflow = 'hidden';
              el.style.position = 'absolute';
              el.style.left = '-9999px';
            }
          });
        });
      };

      // Hide immediately and repeatedly
      hideAll();
      setTimeout(hideAll, 50);
      setTimeout(hideAll, 100);
      setTimeout(hideAll, 200);
      setTimeout(hideAll, 500);
      setTimeout(hideAll, 1000);

      // Force body and html styles
      document.body.style.overflow = 'hidden';
      document.body.style.height = '100vh';
      document.body.style.width = '100vw';
    });
    </script>
  </head>
  <body>
    <div class="spinney-container">
      <div class="spinney-image-wrapper">
        <img src="assets/images/spinney_groovey.png" alt="Spinney" class="spinney-image">
      </div>
      <div class="spinney-message">
        Spinney Sez:<br>Stay Groovy!<br>We're not quite ready yet!
      </div>
    </div>
  </body>
</html>
{% else %}
  <!-- Standard MkDocs content for all other pages -->
  {% extends "base.html" %}

  {% block content %}
    <!-- Standard MkDocs content for all other pages -->

    <!-- A-Z Navigation and Tags for Term Pages -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Only show on term pages
      const path = window.location.pathname;
      if (path.includes('/terms/')) {
        const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        const azNav = document.createElement('div');
        azNav.className = 'waxly-az-nav';
        azNav.style.cssText = 'padding: 0.75rem 0; margin: 0 0 1.5rem 0; text-align: center; font-size: 11px; line-height: 1.8;';

        letters.forEach((letter, index) => {
          const link = document.createElement('a');
          link.href = `/waxly/letters/${letter.toLowerCase()}/`;
          link.textContent = letter;
          link.style.cssText = 'color: #999; text-decoration: none; transition: color 0.2s ease; padding: 0.25rem 0.35rem;';
          link.onmouseover = function() {
            this.style.color = '#ffb400';
          };
          link.onmouseout = function() {
            this.style.color = '#999';
          };
          azNav.appendChild(link);

          // Add pipe separator except after last letter
          if (index < letters.length - 1) {
            const separator = document.createElement('span');
            separator.textContent = ' | ';
            separator.style.cssText = 'color: #444;';
            azNav.appendChild(separator);
          }
        });

        // Insert at the top of the content area
        const contentInner = document.querySelector('.md-content__inner');
        if (contentInner) {
          contentInner.insertBefore(azNav, contentInner.firstChild);
        }

        // Extract and display tags from front matter
        const articleContent = document.querySelector('article.md-content__inner');
        if (articleContent) {
          // Look for the term metadata in the page
          const h1 = articleContent.querySelector('h1');
          if (h1) {
            // Try to extract tags from meta tags or page content
            const metaTags = document.querySelectorAll('meta[property="article:tag"]');
            const tags = Array.from(metaTags).map(tag => tag.content);

            // If no meta tags found, check if there's a data attribute or extract from the page
              if (tags.length == 0) {
              // Look for tags in the page structure (MkDocs Material may expose them)
              const pageMeta = document.querySelector('.md-source-file');
              // We'll add tags via CSS injection from the YAML front matter
            }

            // For now, create a placeholder for tags that will be populated
            const tagsContainer = document.createElement('div');
            tagsContainer.className = 'waxly-tags';
            tagsContainer.style.cssText = 'margin: 1rem 0 1.5rem 0; display: flex; flex-wrap: wrap; gap: 0.4rem; align-items: center;';
            tagsContainer.id = 'term-tags-container';

            // Insert tags container after H1
            h1.parentNode.insertBefore(tagsContainer, h1.nextSibling);
          }
        }
      }
    });
  </script>

  {{ super() }}

  <!-- Related Terms at Bottom of Page -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const path = window.location.pathname;
      if (path.includes('/terms/')) {
        // Load related terms data
        fetch('/waxly/data/related_terms.json')
          .then(response => response.json())
          .then(data => {
            const currentSlug = window.location.pathname.split('/').pop().replace('.html', '');
            const relatedData = data[currentSlug];

            if (relatedData && relatedData.related && relatedData.related.length > 0) {
              // Create related terms section at bottom
              const relatedSection = document.createElement('div');
              relatedSection.style.cssText = 'margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #333;';

              const heading = document.createElement('h3');
              heading.textContent = 'Related Terms';
              heading.style.cssText = 'color: #ffb400; font-size: 1.1rem; margin-bottom: 1rem;';
              relatedSection.appendChild(heading);

              const linksList = document.createElement('div');
              linksList.style.cssText = 'display: flex; flex-wrap: wrap; gap: 0.5rem;';

              relatedData.related.forEach(term => {
                const link = document.createElement('a');
                link.href = `../${term.path}/`;
                link.textContent = term.name;
                link.style.cssText = 'color: #50b7f5; text-decoration: none; padding: 0.4rem 0.8rem; background: rgba(80, 183, 245, 0.1); border-radius: 4px; font-size: 0.9rem; transition: all 0.2s ease;';
                link.onmouseover = function() {
                  this.style.background = 'rgba(80, 183, 245, 0.2)';
                  this.style.color = '#6cc5ff';
                };
                link.onmouseout = function() {
                  this.style.background = 'rgba(80, 183, 245, 0.1)';
                  this.style.color = '#50b7f5';
                };
                linksList.appendChild(link);
              });

              relatedSection.appendChild(linksList);

              // Insert at the end of main content
              const article = document.querySelector('article.md-content__inner');
              if (article) {
                article.appendChild(relatedSection);
              }
            }
          })
          .catch(error => console.log('Related terms not available:', error));
      }
    });
  </script>
  {% endblock %}
{% endif %}
