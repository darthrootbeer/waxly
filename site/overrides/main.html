{% extends "base.html" %}

{% block content %}
  {{ super() }}

  <!-- Related Terms Sidebar -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Load related terms data
      fetch('/vinyl-lexicon/data/related_terms.json')
        .then(response => response.json())
        .then(data => {
          const currentSlug = window.location.pathname.split('/').pop().replace('.html', '');
          const relatedData = data[currentSlug];

          if (relatedData && relatedData.related && relatedData.related.length > 0) {
            // Create related terms sidebar
            const sidebar = document.createElement('nav');
            sidebar.className = 'md-nav md-nav--secondary';
            sidebar.innerHTML = `
              <label class="md-nav__title" for="__toc">
                <span class="md-nav__icon md-icon"></span>
                Related Terms
              </label>
              <ul class="md-nav__list">
                ${relatedData.related.map(term => `
                  <li class="md-nav__item">
                    <a href="../${term.path}/" class="md-nav__link">
                      ${term.name}
                    </a>
                  </li>
                `).join('')}
              </ul>
            `;

            // Insert after the main content
            const mainContent = document.querySelector('.md-content__inner');
            if (mainContent) {
              mainContent.appendChild(sidebar);
            }
          }
        })
        .catch(error => console.log('Related terms not available:', error));
    });
  </script>
{% endblock %}
